
üîß PHASE 1.4 ‚Äî FINAL CORRECTIVE PATCH (NO EXPANSION)

THIS IS A CORRECTION PASS.
DO NOT ADD FEATURES. DO NOT TIGHTEN RULES. DO NOT TOUCH UNRELATED FLOWS.

‚∏ª

OBJECTIVE

Fix three concrete regressions introduced during Phase 1 validation hardening:
	1.	Over-restricted Business Name validation
	2.	SKU value not persisting
	3.	Admin Product Form missing required condition field
	4.	Admin delete actions blocked incorrectly

Nothing else.

‚∏ª

HARD CONSTRAINTS (FAIL IF VIOLATED)
	‚Ä¢	‚ùå No new validation rules
	‚Ä¢	‚ùå No schema changes
	‚Ä¢	‚ùå No redesigns
	‚Ä¢	‚ùå No new UI components
	‚Ä¢	‚ùå No changes to buyer/vendor permissions beyond what is stated

‚∏ª

PART A ‚Äî BUSINESS NAME VALIDATION (REGISTRATION)

FIX IMMEDIATELY

Business / Store Name validation must follow EXACTLY the same rules as Product Name, nothing stricter.

Valid examples (MUST PASS):
	‚Ä¢	‚ÄúTheory Business‚Äù
	‚Ä¢	‚ÄúMercedes Benz Ghana‚Äù
	‚Ä¢	‚ÄúAlpha & Sons Ventures‚Äù

Invalid ONLY if:
	‚Ä¢	Profanity
	‚Ä¢	Contact info
	‚Ä¢	URLs / handles
	‚Ä¢	Obvious garbage (single-character spam, keyboard mash)

‚ùå REMOVE:
	‚Ä¢	Entropy checks
	‚Ä¢	‚ÄúSpam-like‚Äù heuristics
	‚Ä¢	Any logic that rejects normal multi-word business names

This applies to:
	‚Ä¢	Vendor registration
	‚Ä¢	Vendor profile edit (if applicable)

‚∏ª

PART B ‚Äî SKU NOT PERSISTING (CRITICAL DATA LOSS)

ROOT RULE

If a user enters SKU in the product form:
	‚Ä¢	It MUST be saved
	‚Ä¢	It MUST appear in Vendor Products table
	‚Ä¢	It MUST appear in Admin Products view
	‚Ä¢	It MUST round-trip (edit ‚Üí save ‚Üí reload)

REQUIRED FIXES
	‚Ä¢	Verify SKU is included in:
	‚Ä¢	Form schema
	‚Ä¢	transformFormToApiPayload
	‚Ä¢	API POST / PUT handlers
	‚Ä¢	Database insert/update query
	‚Ä¢	Ensure SKU is not dropped during draft ‚Üí publish transitions

‚ùå Silent dropping of SKU is a HARD FAIL.

‚∏ª

PART C ‚Äî ADMIN PRODUCT FORM: CONDITION FIELD (BLOCKER)

CRITICAL BUG

Admin Create/Edit Product form:
	‚Ä¢	Does NOT render condition
	‚Ä¢	BUT backend requires condition
	‚Ä¢	Result: Admin cannot create or edit products

REQUIRED BEHAVIOR

Admin product forms MUST:
	‚Ä¢	Render the same condition field logic as Vendor
	‚Ä¢	Follow the same rules:
	‚Ä¢	Required only when publishing
	‚Ä¢	Uses the same sentinel (unset) pattern
	‚Ä¢	Use the shared product form schema and components

‚ùå Enforcing condition without rendering it is INVALID.

‚∏ª

PART D ‚Äî ADMIN DELETE ACTIONS (USERS & ADMINS)

FIX EXACTLY THIS
	1.	Admin cannot delete users
	‚Ä¢	Toast says ‚ÄúInvalid action‚Äù
	‚Ä¢	This is incorrect
	2.	Super Admin cannot delete admins it created
	‚Ä¢	This is incorrect

REQUIRED RULES
	‚Ä¢	Super Admin CAN:
	‚Ä¢	Delete users
	‚Ä¢	Delete vendors
	‚Ä¢	Delete admins it created
	‚Ä¢	Admin CANNOT:
	‚Ä¢	Delete Super Admin
	‚Ä¢	Delete itself

If delete is blocked:
	‚Ä¢	The reason must be explicit and correct
	‚Ä¢	No generic ‚ÄúInvalid action‚Äù

‚∏ª

VERIFICATION (MANDATORY)

Test with:
	‚Ä¢	Super Admin: the3rdukem@gmail.com / 123asdqweX$
	‚Ä¢	Vendor: ven@kiosk.com.gh / 123asdqwe

REQUIRED TESTS
	1.	Register vendor with business name ‚ÄúTheory Business‚Äù ‚Üí PASS
	2.	Create product with SKU ‚Üí SKU shows in list + edit ‚Üí PASS
	3.	Admin creates product ‚Üí condition field visible ‚Üí PASS
	4.	Admin edits product ‚Üí no condition error ‚Üí PASS
	5.	Super Admin deletes:
	‚Ä¢	User ‚Üí PASS
	‚Ä¢	Vendor ‚Üí PASS
	‚Ä¢	Admin it created ‚Üí PASS

‚∏ª

COMPLETION CRITERIA

This task is ONLY DONE when:
	‚Ä¢	Business names are no longer falsely rejected
	‚Ä¢	SKU persists end-to-end
	‚Ä¢	Admin product forms no longer deadlock
	‚Ä¢	Admin delete permissions work exactly as defined
	‚Ä¢	ZERO new regressions introduced

Do not report success without manually verifying every test above.