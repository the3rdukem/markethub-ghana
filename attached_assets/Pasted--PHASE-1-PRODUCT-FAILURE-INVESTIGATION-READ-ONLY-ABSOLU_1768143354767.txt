

ğŸ” PHASE 1 â€” PRODUCT FAILURE INVESTIGATION (READ-ONLY)

ğŸš¨ ABSOLUTE RULES (NON-NEGOTIABLE)
	â€¢	âŒ DO NOT modify code
	â€¢	âŒ DO NOT refactor
	â€¢	âŒ DO NOT add guards, fallbacks, or â€œtemporary fixesâ€
	â€¢	âŒ DO NOT change validation rules
	â€¢	âŒ DO NOT touch UI logic

This task is INVESTIGATION ONLY.

If you change even one line of production code, the task is FAILED.

â¸»

ğŸ¯ OBJECTIVE

Identify why product creation and updates are failing silently or inconsistently across:
	â€¢	Admin Create Product
	â€¢	Admin Edit Product
	â€¢	Vendor Create Product
	â€¢	Vendor Draft Save
	â€¢	Vendor Publish
	â€¢	SKU / Barcode persistence
	â€¢	Admin delete-admin permissions

You must determine exact failure points, not speculate.

â¸»

ğŸ§ª REQUIRED TEST ACCOUNTS (MANDATORY)

Use ONLY these credentials:

Vendor

ven@kiosk.com.gh
123asdqwe

Admin

the3rdukem@gmail.com
123asdqweX$


â¸»

ğŸ§  INVESTIGATION TRACKS (ALL REQUIRED)

ğŸ” TRACK 1 â€” API FAILURE TRACE

For EACH failing action:
	â€¢	Vendor create product
	â€¢	Vendor save draft
	â€¢	Vendor publish
	â€¢	Admin create product
	â€¢	Admin update product

You MUST log and report:
	1.	Request payload sent from client
	2.	API route hit
	3.	Server-side validation result
	4.	Database call arguments
	5.	Database response or error
	6.	API response returned to client

ğŸ“Œ You must identify:
	â€¢	Which field causes rejection
	â€¢	Whether rejection is from:
	â€¢	Zod schema
	â€¢	Content safety
	â€¢	DAL
	â€¢	Database constraint

â¸»

ğŸ” TRACK 2 â€” BARCODE / SKU FAILURE

Specifically investigate:
	â€¢	Why entering a barcode causes:
	â€¢	Auto-scroll
	â€¢	No error message
	â€¢	No highlight
	â€¢	Silent failure

You MUST answer:
	â€¢	Is barcode:
	â€¢	Failing validation?
	â€¢	Stripped during normalization?
	â€¢	Rejected by DB?
	â€¢	Overwritten by transform?
	â€¢	Is barcode optional or required in each schema layer?

â¸»

ğŸ” TRACK 3 â€” CONDITION FIELD CONTRADICTION

There is a direct contradiction:
	â€¢	Contract says condition is top-level
	â€¢	Your note says: â€œcondition field is not supposed to be a dedicated top level fieldâ€

You MUST investigate and report:
	â€¢	Where condition is:
	â€¢	Defined
	â€¢	Required
	â€¢	Validated
	â€¢	Transformed
	â€¢	Persisted

Produce a flow diagram:

Form â†’ API â†’ Normalizer â†’ DAL â†’ DB â†’ Read API â†’ UI

Highlight where condition mismatches expectations.

â¸»

ğŸ” TRACK 4 â€” ADMIN DELETE ADMIN FAILURE

Investigate:
	â€¢	Why Super Admin still cannot delete Admins they created

You MUST report:
	â€¢	Frontend permission logic
	â€¢	Backend authorization check
	â€¢	Ownership comparison logic
	â€¢	Exact rejection reason

No assumptions.

â¸»

ğŸ” TRACK 5 â€” ERROR HANDLING BREAKDOWN

Investigate why:
	â€¢	Forms fail with no visible error
	â€¢	Console shows errors instead of inline messages
	â€¢	Auto-scroll happens without feedback

You MUST identify:
	â€¢	Where errors are swallowed
	â€¢	Where throw vs return is still happening
	â€¢	Where error.field is missing or ignored

â¸»

ğŸ“„ REQUIRED OUTPUT FORMAT (STRICT)

Your final response MUST be structured exactly as follows:

1ï¸âƒ£ Symptom â†’ Root Cause Table

Symptom	Root Cause	Evidence



â¸»

2ï¸âƒ£ Failure Layer Mapping

For each failure:

UI âŒ â†’ Form âŒ â†’ API âŒ â†’ DAL âŒ â†’ DB âŒ

(Only mark where failure actually occurs)

â¸»

3ï¸âƒ£ Data Contract Violations (If Any)

List any place where:
	â€¢	Field is optional in one layer but required in another
	â€¢	Field is transformed inconsistently
	â€¢	Field is silently dropped

â¸»

4ï¸âƒ£ ZERO-FIX CONFIRMATION

Explicitly confirm:

â€œNo production code was modified during this investigation.â€

â¸»

âŒ FAILURE CONDITIONS

This investigation FAILS if:
	â€¢	You propose fixes
	â€¢	You modify code
	â€¢	You merge PRs
	â€¢	You guess instead of proving
	â€¢	You skip any track above

â¸»

ğŸ›‘ FINAL NOTE

We will not proceed to another fix until:
	â€¢	Every failure has a single, proven root cause
	â€¢	The product contract contradiction is resolved on paper
	â€¢	Error handling gaps are fully mapped

Only after this investigation will I authorize the Final Corrective Patch Prompt.
