PHASE 4A ‚Äî API INTEGRATIONS & IDENTITY

EXIT-ORIENTED MASTER PROMPT (STRICT)

‚ö†Ô∏è NON-NEGOTIABLE RULES (READ FIRST)
	1.	Phase 3 (Payments & Orders) is LOCKED
	‚Ä¢	Do NOT modify:
	‚Ä¢	orders
	‚Ä¢	payments
	‚Ä¢	inventory logic
	‚Ä¢	webhooks
	‚Ä¢	checkout flow
	‚Ä¢	Any attempt to touch these = FAILURE
	2.	Audit Before Code
	‚Ä¢	Before writing a single line of code:
	‚Ä¢	Enumerate what is ALREADY implemented
	‚Ä¢	Explicitly list gaps ONLY
	‚Ä¢	Do not re-implement working features
	3.	No UI Redesign
	‚Ä¢	This phase is integration + correctness
	‚Ä¢	Minimal UI only where absolutely required for functionality
	4.	No New Tables Unless Justified
	‚Ä¢	Schema changes require:
	‚Ä¢	Clear justification
	‚Ä¢	Migration safety
	‚Ä¢	Backward compatibility
	5.	Exit Criteria > Features
	‚Ä¢	Success is defined by verifiable behavior, not number of integrations added

‚∏ª

üéØ PHASE 4A SCOPE (ONLY THESE)

1Ô∏è‚É£ Google OAuth (BUYERS & VENDORS ONLY)

Objectives
	‚Ä¢	Enable Google sign-in for:
	‚Ä¢	Buyers
	‚Ä¢	Vendors
	‚Ä¢	Admins remain email/password only

Strict Rules
	‚Ä¢	OAuth must:
	‚Ä¢	Respect existing role separation
	‚Ä¢	Not auto-elevate roles
	‚Ä¢	Not bypass validation rules from Phase 1
	‚Ä¢	Existing email rules still apply:
	‚Ä¢	Buyer + Vendor may share email
	‚Ä¢	Admin email remains globally unique

Verification Checklist
	‚Ä¢	OAuth login creates or links correct role
	‚Ä¢	OAuth users can still log in via password reset
	‚Ä¢	No duplicate user records created
	‚Ä¢	Audit logs created for OAuth login events

‚∏ª

2Ô∏è‚É£ Google Maps (ADDRESS NORMALIZATION ONLY)

Objectives
	‚Ä¢	Normalize addresses for:
	‚Ä¢	Vendor registration
	‚Ä¢	Buyer shipping addresses

Rules
	‚Ä¢	Address input remains editable
	‚Ä¢	Google Maps is assistive, not mandatory
	‚Ä¢	No forced lat/lng dependency in checkout

Verification Checklist
	‚Ä¢	Ghana addresses work without street numbers
	‚Ä¢	Free-text fallback works
	‚Ä¢	Stored address is human-readable
	‚Ä¢	No checkout breakage if Maps API fails

‚∏ª

3Ô∏è‚É£ Smile ID / Vendor Identity (PASSIVE MODE)

Objectives
	‚Ä¢	Prepare vendor verification foundation
	‚Ä¢	NO blocking of vendor actions yet

Rules
	‚Ä¢	Verification status = informational only
	‚Ä¢	No gating, no suspensions, no automation
	‚Ä¢	Manual admin review only

Verification Checklist
	‚Ä¢	Vendor verification status stored
	‚Ä¢	Admin can view verification data
	‚Ä¢	No effect on product publishing yet

‚∏ª

4Ô∏è‚É£ Messaging (REPLACES WISHLIST SLOT)

Objectives
	‚Ä¢	Enable buyer ‚Üî vendor messaging
	‚Ä¢	Contextual to:
	‚Ä¢	Orders
	‚Ä¢	Reviews (future-proofed)

Rules
	‚Ä¢	No real-time requirement (polling OK)
	‚Ä¢	No file uploads yet
	‚Ä¢	No payment discussion enforcement yet

Verification Checklist
	‚Ä¢	Buyer can message vendor from order
	‚Ä¢	Vendor can reply
	‚Ä¢	Messages scoped correctly
	‚Ä¢	No cross-order leakage

‚∏ª

5Ô∏è‚É£ Analytics Hooks (NON-INVASIVE)

Objectives
	‚Ä¢	Prepare analytics instrumentation
	‚Ä¢	No dashboards required

Rules
	‚Ä¢	Track:
	‚Ä¢	Page views
	‚Ä¢	Product views
	‚Ä¢	Checkout start
	‚Ä¢	Payment success/failure
	‚Ä¢	Must not affect performance or logic

Verification Checklist
	‚Ä¢	Events fire correctly
	‚Ä¢	No PII leakage
	‚Ä¢	No blocking scripts

‚∏ª

üö´ EXPLICITLY OUT OF SCOPE
	‚Ä¢	Refunds
	‚Ä¢	Vendor payouts
	‚Ä¢	Mobile money configuration
	‚Ä¢	Review system changes
	‚Ä¢	Search filter rework
	‚Ä¢	UI redesigns
	‚Ä¢	Admin promotions logic

‚∏ª

üß™ MANDATORY EXIT AUDIT (REQUIRED)

Before reporting success, produce a Phase 4A Exit Audit with:
	1.	OAuth verification table
	2.	Maps failure-mode testing
	3.	Vendor verification passive checks
	4.	Messaging access control validation
	5.	Confirmation that:
	‚Ä¢	Phase 3 code was untouched
	‚Ä¢	No regressions in checkout, orders, inventory

‚ùå No audit = Phase rejected

‚∏ª

üß± FINAL SUCCESS CRITERIA

Phase 4A is approved ONLY if:
	‚Ä¢	All integrations are additive
	‚Ä¢	No existing flows regress
	‚Ä¢	No silent schema corruption
	‚Ä¢	All changes are reversible
	‚Ä¢	Exit audit passes cleanly
