‚∏ª

üìå MASTER PROMPT ‚Äî ADMIN NAVIGATION ACTIVITY COUNTS (OPTION B)

You are implementing ADMIN NAVIGATION ACTIVITY INDICATORS for the KIOSK / MarketHub multivendor marketplace running on Replit, with auth, persistence, and PostgreSQL already stable.

‚ö†Ô∏è IMPORTANT
DO NOT restore or attempt to ‚Äúfix‚Äù total counts in the admin navigation tabs.
Total counts already exist elsewhere and must remain separate.

This task is intentional repurposing, not a bug fix.

‚∏ª

üéØ GOAL

Repurpose the Admin Dashboard navigation tab counts to show:

NEW ACTIVITY SINCE LAST ADMIN LOGIN

These are activity badges, not totals.

‚∏ª

========================================

SECTION 1 ‚Äî DEFINITIVE BEHAVIOR (MANDATORY)

========================================

Admin navigation tabs MUST show counts of new events since the admin‚Äôs last successful login.

Navigation tab meanings:
	‚Ä¢	Users ‚Üí New buyer + vendor registrations
	‚Ä¢	Vendors ‚Üí New vendor registrations OR newly verified vendors
	‚Ä¢	Products ‚Üí New products created (any status: draft, published, pending)
	‚Ä¢	Orders ‚Üí New orders placed
	‚Ä¢	Disputes ‚Üí New disputes opened (if applicable)

These counts:
	‚Ä¢	Are per admin
	‚Ä¢	Are time-based
	‚Ä¢	Are NOT absolute totals
	‚Ä¢	Reset automatically when the admin logs in again

‚∏ª

========================================

SECTION 2 ‚Äî DATA SOURCE RULES

========================================

Counts MUST be computed using timestamps, not cached numbers.

Allowed data sources:
	‚Ä¢	created_at
	‚Ä¢	verified_at
	‚Ä¢	approved_at
	‚Ä¢	audit logs (if already present)

REQUIRED:
	‚Ä¢	Each admin has last_login_at
	‚Ä¢	This value updates only after successful login

Query pattern example:

COUNT(*) WHERE created_at > admin.last_login_at

‚ùå DO NOT:
	‚Ä¢	Use status = 'active' filters
	‚Ä¢	Use hardcoded values
	‚Ä¢	Share counts across admins
	‚Ä¢	Store counts in frontend state

‚∏ª

========================================

SECTION 3 ‚Äî UI RULES (STRICT)

========================================

Navigation tab numbers must behave like notification badges, NOT totals.

UI Requirements:
	‚Ä¢	Counts appear next to tab labels (e.g. Users 3)
	‚Ä¢	Hide the badge entirely if count = 0
	‚Ä¢	Style as secondary / muted badge
	‚Ä¢	DO NOT mirror dashboard tile styling

Dashboard tiles:
	‚Ä¢	‚ùå DO NOT TOUCH
	‚Ä¢	They remain absolute totals

‚∏ª

========================================

SECTION 4 ‚Äî USERS & VENDORS EDGE CASES

========================================

Users tab:
	‚Ä¢	Includes BOTH buyers and vendors
	‚Ä¢	Count = total new users since last login

Vendors tab:
	‚Ä¢	Count new vendor registrations
	‚Ä¢	OR newly verified vendors
	‚Ä¢	OR newly approved vendors
(choose the most meaningful based on existing workflow)

This must be explicit in code comments.

‚∏ª

========================================

SECTION 5 ‚Äî ORDERS & PRODUCTS CLARITY

========================================
	‚Ä¢	Products count includes:
	‚Ä¢	draft
	‚Ä¢	pending
	‚Ä¢	published
	‚Ä¢	This avoids confusion caused by approval workflows
	‚Ä¢	Orders count includes:
	‚Ä¢	all new orders regardless of fulfillment state

‚∏ª

========================================

SECTION 6 ‚Äî IMPLEMENTATION CONSTRAINTS

========================================
	‚Ä¢	Backend must expose a single endpoint:
	‚Ä¢	/admin/activity-summary
	‚Ä¢	Frontend must consume this endpoint ONLY
	‚Ä¢	No inline queries in components
	‚Ä¢	No duplicated logic

‚∏ª

========================================

SECTION 7 ‚Äî SAFETY & NON-REGRESSION

========================================

DO NOT:
	‚Ä¢	Modify authentication
	‚Ä¢	Modify audit logging
	‚Ä¢	Modify existing dashboard tile queries
	‚Ä¢	Change product status logic
	‚Ä¢	Change vendor verification logic

This task is read-only to existing systems except for:
	‚Ä¢	admin last_login_at
	‚Ä¢	new activity aggregation logic

‚∏ª

========================================

FINAL VALIDATION CHECKLIST (REQUIRED)

========================================

This task is complete ONLY IF:

‚úÖ Navigation tab counts are NOT totals
‚úÖ Counts reset per admin login
‚úÖ Counts differ between two admins logged in at different times
‚úÖ Users tab no longer shows ‚Äú0‚Äù when activity exists
‚úÖ Vendors tab shows meaningful activity
‚úÖ Products tab count matches recent creations
‚úÖ Dashboard tiles remain unchanged
‚úÖ No duplicated count logic exists

‚∏ª

END OF PROMPT

‚∏ª