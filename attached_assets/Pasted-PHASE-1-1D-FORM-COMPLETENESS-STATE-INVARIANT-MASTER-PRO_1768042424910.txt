PHASE 1.1D ‚Äî FORM COMPLETENESS & STATE INVARIANT MASTER PROMPT

(FINAL PHASE 1 LOCK ‚Äî ABSOLUTE)

‚∏ª

========================================

SECTION 1 ‚Äî FORM FIELD REGISTRATION PARITY

========================================

All Product Create/Edit fields MUST:
	‚Ä¢	Have id
	‚Ä¢	Have name
	‚Ä¢	Have data-field
	‚Ä¢	Be registered in the error-to-field map
	‚Ä¢	Support scroll + focus

Fields REQUIRED to be fixed:
	‚Ä¢	price
	‚Ä¢	quantity
	‚Ä¢	SKU
	‚Ä¢	category select
	‚Ä¢	inventory status
	‚Ä¢	any Radix <Select />

‚ùå No field may fallback to ‚Äúerror above publish button‚Äù

‚∏ª

========================================

SECTION 2 ‚Äî NUMERIC FIELD NORMALIZATION (CRITICAL)

========================================

BEFORE persistence (server-side):

Field	Rule
quantity	If empty ‚Üí default to 0
price	Required ‚Üí reject empty
comparePrice	If empty ‚Üí null
discount fields	If empty ‚Üí null

üö´ undefined or "" MUST NEVER reach the database

‚∏ª

========================================

SECTION 3 ‚Äî UI SAFETY GUARANTEE (HARD RULE)

========================================

All UI components consuming product data MUST assume:

quantity: number
price: number

If DB returns null:
	‚Ä¢	Normalize in API response layer
	‚Ä¢	NOT in component render

‚∏ª

========================================

SECTION 4 ‚Äî RADIX SELECT SAFETY FIX

========================================

For every <Select />:

‚úÖ Always pass a non-empty string value
‚úÖ Use explicit placeholder state
‚ùå Never bind raw DB values directly

Example pattern:

const safeValue = value ?? "default"


‚∏ª

========================================

SECTION 5 ‚Äî DATA REPAIR SCRIPT (MANDATORY)

========================================

Because corrupted products already exist:
	‚Ä¢	Write a one-time repair:

UPDATE products
SET quantity = 0
WHERE quantity IS NULL;

This is non-negotiable.

‚∏ª

========================================

SECTION 6 ‚Äî REGRESSION TESTS (REQUIRED)

========================================

Using vendor login:

ven@kiosk.com.gh / 123asdqwe
	1.	Edit product
	2.	Clear quantity field
	3.	Save
	4.	Reload product page
	5.	Homepage
	6.	Vendor products list

‚úÖ App MUST NOT crash
‚úÖ Quantity defaults to 0
‚úÖ No console errors

‚∏ª

========================================

FINAL EXIT RULE ‚Äî PHASE 1 CERTIFICATION

========================================

Phase 1 is COMPLETE ONLY IF:

‚úÖ All product form fields scroll & highlight correctly
‚úÖ No empty persisted numeric fields
‚úÖ No Select crashes possible
‚úÖ Corrupted data repaired
‚úÖ No vendor can brick their products

‚∏ª

